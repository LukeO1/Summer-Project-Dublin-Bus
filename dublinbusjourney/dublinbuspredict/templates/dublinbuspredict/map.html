<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Map - My Journey</title>

        <!-- Bootstrap: Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <!-- Bootstrap: Optional theme: Look and Feel -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- CSS: Link to the CSS stylesheet-->
<!--<link rel="stylesheet" href="/css/main.css">-->
        
        <!-- Link to jQuery libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <!-- Needed for Glyphicons: Font Awesome CDN Source: http://fontawesome.io/ -->
        <script src="https://use.fontawesome.com/e8a4c811a1.js"></script>
        <!-- Font Awesome CDN Source: http://fontawesome.io/ -->
        <script src="https://use.fontawesome.com/e8a4c811a1.js"></script>


        {% load staticfiles %}
            <link rel="stylesheet" type="text/css" href="{% static 'dublinbuspredict/css/style.css' %}" />
            <script type="text/javascript" src="{% static 'dublinbuspredict/js/displaySearch.js' %}"></script>
            <script type="text/javascript" src="{% static 'dublinbuspredict/js/main.js' %}"></script>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHxpqeoG1jNA4VHBlFeopWuRmFoYTh-ME&callback=initMap"></script>
		    <link rel="stylesheet" type="text/css" href="{% static 'dublinbuspredict/style.css' %}" />
<!--<script type="text/javascript" src="/js/main.js"></script>-->
<!--<script type="text/javascript" src="/js/displaySearch.js"></script>-->

    </head>
    <body onload="loadRoutes()">
                <!-- Main container to give website 12-grid shape -->
            <div class="container-fluid">
                <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
                            <div class="navbar-collapse">
                                <ul class="nav navbar-nav">
                                    <li class="navbar-left"> 
                                        <a href="#" class="custom-white" style="cursor:pointer"  onclick="openNav()">
                                            <span class="glyphicon glyphicon-menu-hamburger"></span>
                                        </a></li>
                                {% load static %}
                                <li class="navbar-right"><img id="db_logo" alt="Dublin Bus Logo" src="{% static 'dublinbuspredict/css/images/dblogo.png' %}" class="img-responsive" ></li>
                            </ul> 
                            </div>
                    </nav>
                <div id="mySidenav" class="sidenav">
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                    <div id="w3-buttons"> 
                    <a href="/dublinbuspredict/" class="w3-bar-item w3-button"><i class="fa fa-home fa-fw"></i>&nbsp;Home</a>
                    <a href="/dublinbuspredict/tickets_fares" class="w3-bar-item w3-button"><i class="fa fa-eur fa-fw"></i>&nbsp;Tickets & Fares</a>
                    <a href="/dublinbuspredict/connections" class="w3-bar-item w3-button"><i class="fa fa-train fa-fw"></i>&nbsp;Connections</a>
                    <a href="/dublinbuspredict/contact" class="w3-bar-item w3-button"><i class="fa fa-phone fa-fw"></i>&nbsp;Contact Us</a>
                    </div>
                    <div id="social-media" class="row col-lg-12 my-social-icons">
                    <a class="col-xs-2 btn btn-social-icon btn-twitter"><span class="fa fa-twitter"></span></a>
                    <a class="col-xs-2 btn btn-social-icon btn-facebook"><span class="fa fa-facebook"></span></a>
                    <a class="col-xs-2 btn btn-social-icon btn-instagram"><span class="fa fa-instagram"></span></a>
                    <a class="col-xs-2 btn btn-social-icon btn-linkedin"><span class="fa fa-linkedin"></span></a>
                    <a class="col-xs-2 btn btn-social-icon btn-google"><span class="fa fa-google"></span></a>
                </div> 
                </div>    
        </div>

        <!-- Map Container -->
        <div class="container-fluid my-map-div" id="pushed-content">
            <div class="row">
                <h3>Dublin Bus <small>Route Planner</small></h3>
                <div id="map"></div>
            </div>

            <!-- Inline Forms -->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-12">
                        <h4>Journey</h4>
                        <form action="" method="" class="form-inline">
                            <div class="form-group my-changed-journey">
                                <label for="route">Route</label>
                                {% load static %}
                                <button type="button" id="reset-2" onclick="loadRoutes2()" class="form-control btn btn-primary">Reset</button>
                                <div class="form-group">
                                    <!--<input type="text" class="form-control" placeholder="Enter a route">-->
                                    {% load static %}
                                    <div class="dropdown">
                                        <input id="search-box-4" oninput="searchFunctionRoute2()" type="text" name="search" placeholder="Enter route nÂº...">
                                        <div class="dropdown-content">
                                            <ul class="dropdown-list" id ="dropdown-list-4">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <label for="source">Source</label>
                                <div class="form-group">
                                    <!--<input type="text" class="form-control" placeholder="Select a source">-->
                                    <div class="dropdown">
                                        <input id="search-box-5" oninput="searchFunctionSRC2()" type="text" name="search2" placeholder="Enter starting stop!">
                                        <div class="dropdown-content">
                                            <ul class="dropdown-list" id="dropdown-list-5">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <label for="source">Destination</label>
                                <div class="form-group">
                                    <!--<input type="text" class="form-control" placeholder="Select a destination">-->
                                    <div class="dropdown">
                                        <input id="search-box-6" oninput="searchFunctionDest2()" type="text" name="search2" placeholder="Enter destination stop!">
                                        <div class="dropdown-content">
                                            <ul class="dropdown-list" id="dropdown-list-6">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <label for="date">Date</label>
                                <div class="form-group">
                                    <input class="form-control" type="date" value="" id="example-date-input">
                                </div>      
                                <label for="time">Time</label>
                                <div class="form-group">
                                    <input class="form-control" type="time" value="" id="example-time-input">
                                </div>
                                <!--<button type="submit" class="form-control btn btn-primary">Find Journey</button>-->
                                <button type="button" id="submit-route2" class="form-control btn btn-primary">Find Journey</button>
                                <script>
                                    document.getElementById("submit-route2").addEventListener("click", function(){
                                        route = document.getElementById("search-box-4").value;
                                        source = document.getElementById("search-box-5").value;
                                        destination = document.getElementById("search-box-6").value;
                                        date = document.getElementById("example-date-input").value;
                                        time = document.getElementById("example-time-input").value;
                                        console.log('Route:', route)
                                        console.log('Source:', source)
                                        console.log('Destination:', destination)
                                        console.log('Time:', time)
                                        console.log('Date:', date)
                                        initMap()
                                        if (time == "" || date == ""){
                                            console.log('now')
                                            $.getJSON("http://127.0.0.1:8000/dublinbuspredict/runModel", {"route":route, "source":source, "destination":destination}, function(d) {
                                            console.log('here', d)
                                        });
                                        }
                                        else{
                                            console.log('date and time')
                                            $.getJSON("http://127.0.0.1:8000/dublinbuspredict/runPlanner", {"route":route, "source":source, "destination":destination, "date":date, "time":time}, function(d) {
                                            console.log('here', d)
                                        });
                                        }


                                    });
                                </script>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Container for all Div Results-->
            <div class="container">
                <div class="row my-result">
                    <div class="col-xs-12">
                        <h4>Results</h4>
                        <!-- First Div: Showing by Default-->
                        <div class="row my-individual-result">
                            <div class="col-sm-2 text-center"><h4>Source</h4></div>
                            <div class="col-sm-2 text-center"><h4>Destination</h4></div>
                            <div class="col-sm-2 text-center"><h4>Journey Time</h4></div>
                            <div class="col-sm-2 text-center"><h4>Price</h4></div>
                            <div class="col-sm-4 text-center"><h4 id="showDetails" style="cursor:pointer">Show Details</h4></div>
                        </div>
                        <!-- Second Div: Hidden by Default: Shows OnClick "Show Details"-->
                        <div class="row my-individual-result" id="toggleDetailsRes" style="display:none">
                            <div class="col-sm-2 text-center"><h5>Display Source</h5></div>
                            <div class="col-sm-2 text-center"><h5>Display Destination</h5></div>
                            <div class="col-sm-2 text-center"><h5>Display Journey Time</h5></div>
                            <div class="col-sm-2 text-center"><h5>Display Price</h5></div>
                            <div class="col-sm-4 text-center"><h4 id="RouteMap" style="cursor:pointer">More Information</h4></div>
                        </div>
                        <!-- Added: 19/07 -->
                        <!-- Third Div: Hidden by Default: Shows Loading Spinner OnClick "More Information" -->
                        <div class="row" id="toggleLoad" style="display:none">
                            <i class="fa fa-spinner fa-spin my-spinner" style="font-size:24px"></i>
                        </div>
                        <!-- Fourth Div: Hidden by Default: Shows Delayed OnClick "More Information" after Loading Spinner -->
                        <div class="row my-individual-result" id="toggleRouteMap" style="display:none">
                            <div class="col-sm-3 text-center"><h4>Time</h4>
                                <li class="col-sm-12 text-center">12:00</li>
                                <li class="col-sm-12 text-center">12:30</li>
                                <li class="col-sm-12 text-center">12:40</li>
                                <li class="col-sm-12 text-center">12:50</li>
                            </div>
                            <div class="col-sm-3 text-center"><h4>Routemap</h4>
                                <li><i class="col-sm-12 fa fa-circle" aria-hidden="true"></i></li>
                                <li><i class="col-sm-12 fa fa-circle" aria-hidden="true"></i></li>
                                <li><i class="col-sm-12 fa fa-circle" aria-hidden="true"></i></li>
                                <li><i class="col-sm-12 fa fa-circle" aria-hidden="true"></i></li>
                            </div>
                            <div class="col-sm-3 text-center"><h4>Street Name</h4>
                                <li class="col-sm-12 text-center">Crofton Road</li>
                                <li class="col-sm-12 text-center">Stop</li>
                                <li class="col-sm-12 text-center">Stop</li>
                                <li class="col-sm-12 text-center">Infirmary Road</li>
                            </div>
                            <div class="col-sm-3 text-center"><h4>Price</h4>
                                <li class="col-sm-12 text-center">1</li>
                                <li class="col-sm-12 text-center">1.50</li>
                                <li class="col-sm-12 text-center">2.00</li>
                                <li class="col-sm-12 text-center">2.50</li>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
        </div>

        <!-- Footer Row -->
        <div id="container-fluid">
        
                <div class="row">
            <footer class="col-sm-12 navbar-fixed-bottom my-footer" style="position:sticky">
                <div class="row">
                    {% load static %}
                    <div class="col-sm-3 text-center"><img id="transport-logo" src="{% static 'dublinbuspredict/css/images/TFI%20(2).png' %}"></div>
                    <div id="footer-text">
                    <div id ="left-footer" class="col-sm-2 text-left"><h4>Information</h4>
                        <a href="/dublinbuspredict/" class="footer-links">Home</a>
                        <a href="/dublinbuspredict/tickets_fares" class="footer-links">Tickes and Fares</a><br>
                        <a href="/dublinbuspredict/connections" class="footer-links">Connections</a><br>
                        <a href="/dublinbuspredict/contact" class="footer-links">Contact Us</a><br>
                    </div>
                    <div id ="right-footer" class="col-sm-2 text-left"><h4>Other transport sites</h4>
                        <a href="https://www.luas.ie/" class="footer-links">Luas</a><br>
                        <a href="http://www.buseireann.ie/" class="footer-links">Bus eireann</a><br>
                        <a href="http://www.irishrail.ie/" class="footer-links">Iarnrod eireann</a><br>
                    </div>
                    </div>
                    {% load static %}
                    <div id="bl-logo" class="col-sm-3"><img id="buslightyear" src="{% static 'dublinbuspredict/css/images/logonobg.png' %}">
                    </div>
                    </div>
                <br>
                <br>
                <p class="text-center" style="padding:10px;">&copy; Copyright 2017</p>
            </footer>
        </div>
            </div>

        <!-- Bootstrap Files: Documentation requested they be added to end of HTML page to avoid errors -->

        <!-- jQuery file: Needs to be pasted above Bootstrap file to avoid errors -->    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    </body>
</html>
